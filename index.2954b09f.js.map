{"mappings":"iiBAAAA,EAAA,S,kECAA,IAAAC,EAAAD,EAAA,S,gFAQME,EAAO,CACXC,WAAYC,SAASC,cAAc,iBACnCC,cAAeF,SAASC,cAAc,mBACtCE,cAAeH,SAASC,cAAc,YAGpCG,EAAc,GACdC,EAAO,E,SAIIC,I,OAAAA,EAAfC,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,EAAwBC,G,qEACtBA,EAAIC,iBACJR,EAAcO,EAAIE,cAAcC,SAASC,YAAYC,MACrDX,EAAO,EACPY,EAAAC,iBAAiBC,UAAY,GAC7BrB,EAAKI,cAAckB,UAAUC,IAAI,aAE5BjB,EAAW,C,sBACdkB,I,4CAII,EAAAC,EAAAC,WAAUpB,EAAaC,GAC1BoB,MAAK,SAAAC,G,IACEC,EADKD,EAAJE,KACeC,cAEtB,GAAKF,EAAL,CAIA,GAAIA,GAAY,GAGd,OAFA7B,EAAKK,cAAciB,UAAUC,IAAI,wBACjC,EAAAJ,EAAAa,uBAAsB1B,EAAaC,GAIrCP,EAAKK,cAAciB,UAAUW,OAAO,oBACpC,EAAAd,EAAAa,uBAAsB1B,EAAaC,IACnC,EAAA2B,EAAAC,eAAc7B,EAAauB,GAC3B7B,EAAKI,cAAckB,UAAUW,OAAO,Y,MAZlCG,G,IAcHC,OAAM,SAAAC,G,OAASC,QAAQC,IAAIF,E,IAC3BG,SAAQ,WACPzC,EAAKC,WAAWyC,O,iDAjCCC,MAAAC,KAAAC,U,CAFvB7C,EAAKC,WAAW6C,iBAAiB,U,SAETjC,G,OAATL,EAAQmC,MAAAC,KAAAC,U,IAqCvB,IAAMrB,EAAmB,WACvB,OAAOf,EAAAsC,GAASC,OAAOC,KACrB,iBACG,+BACH,CACEC,QAAS,K,EAKTd,EAAgB,WACpB,OAAO3B,EAAAsC,GAASC,OAAOG,QACrB,WACA,6DACA,CACED,QAAS,K","sources":["src/index.js","src/js/home/search.js"],"sourcesContent":["import './js/signIn/sing-in';\nimport './js/home/home-movies';\nimport './js/loader';\nimport './js/modalMoviesCard';\nimport './js/modal-group';\nimport './js/pagination';\nimport './js/trailer';\nimport './js/home/search';\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport Notiflix from 'notiflix';\nimport { onKeyWord } from '../../api-services/movies-api-service';\nimport { createMoviesMarkupKey, galleryConteiner } from './home-movies';\nimport { createPagiKey } from '../pagination';\n\nexport { searchQuery };\n\nconst refs = {\n  searchForm: document.querySelector('.header__form'),\n  tuiPagination: document.querySelector('.tui-pagination'),\n  moviesSection: document.querySelector('.movies'),\n};\n\nlet searchQuery = '';\nlet page = 1;\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nasync function onSearch(evt) {\n  evt.preventDefault();\n  searchQuery = evt.currentTarget.elements.searchQuery.value;\n  page = 1;\n  galleryConteiner.innerHTML = '';\n  refs.tuiPagination.classList.add('is-hidden');\n\n  if (!searchQuery) {\n    notifyInfoSearch();\n    return;\n  }\n\n  await onKeyWord(searchQuery, page)\n    .then(({ data }) => {\n      const totalRes = data.total_results;\n\n      if (!totalRes) {\n        notifyFailure();\n        return;\n      }\n      if (totalRes <= 20) {\n        refs.moviesSection.classList.add('movies--padding');\n        createMoviesMarkupKey(searchQuery, page);\n        return;\n      }\n\n      refs.moviesSection.classList.remove('movies--padding');\n      createMoviesMarkupKey(searchQuery, page);\n      createPagiKey(searchQuery, totalRes);\n      refs.tuiPagination.classList.remove('is-hidden');\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      refs.searchForm.reset();\n    });\n}\n\nconst notifyInfoSearch = () => {\n  return Notiflix.Report.info(\n    'Empty query ðŸ§',\n    'Please, fill out this field!',\n    {\n      timeout: 4000,\n    }\n  );\n};\n\nconst notifyFailure = () => {\n  return Notiflix.Report.failure(\n    'Ooops ðŸ˜•',\n    'Search result not successful. Enter the correct movie name',\n    {\n      timeout: 4000,\n    }\n  );\n};\n"],"names":["parcelRequire","$bpxeT","$e0c64cebdd2a6274$var$refs","searchForm","document","querySelector","tuiPagination","moviesSection","$e0c64cebdd2a6274$export$737148d43a127671","$e0c64cebdd2a6274$var$page","$e0c64cebdd2a6274$var$_onSearch","$parcel$interopDefault","$2TvXO","mark","_callee","evt","preventDefault","currentTarget","elements","searchQuery","value","$7xmR0","galleryConteiner","innerHTML","classList","add","$e0c64cebdd2a6274$var$notifyInfoSearch","$bt2La","onKeyWord","then","param","totalRes","data","total_results","createMoviesMarkupKey","remove","$jcFG7","createPagiKey","$e0c64cebdd2a6274$var$notifyFailure","catch","error","console","log","finally","reset","apply","this","arguments","addEventListener","$iU1Pc","Report","info","timeout","failure"],"version":3,"file":"index.2954b09f.js.map"}