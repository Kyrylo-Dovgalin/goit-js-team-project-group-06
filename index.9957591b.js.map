{"mappings":"qhBAAAA,EAAA,S,kECAAA,EAAA,S,wDAQA,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,iBACnCC,cAAeF,SAASC,cAAc,mBACtCE,cAAeH,SAASC,cAAc,YAGxC,IAAIG,EAAc,GACdC,EAAO,EAEXP,EAAKC,WAAWO,iBAAiB,UAEjCC,eAAwBC,GAOtB,GANAA,EAAIC,iBACJL,EAAcI,EAAIE,cAAcC,SAASC,YAAYC,MACrDR,EAAO,EACPS,EAAAC,iBAAiBC,UAAY,GAC7BlB,EAAKI,cAAce,UAAUC,IAAI,cAE5Bd,EAEH,YADAe,UAII,EAAAC,EAAAC,WAAUjB,EAAaC,GAC1BiB,MAAK,EAACC,KAAEA,MACP,MAAMC,EAAWD,EAAKE,cAEtB,GAAKD,EAAL,CAIA,GAAIA,GAAY,GAGd,OAFA1B,EAAKK,cAAcc,UAAUC,IAAI,wBACjC,EAAAJ,EAAAY,uBAAsBtB,EAAaC,GAIrCP,EAAKK,cAAcc,UAAUU,OAAO,oBACpC,EAAAb,EAAAY,uBAAsBtB,EAAaC,IACnC,EAAAuB,EAAAC,eAAczB,EAAaoB,GAC3B1B,EAAKI,cAAce,UAAUU,OAAO,Y,MAZlCG,GAY8C,IAEjDC,OAAMC,GAASC,QAAQC,IAAIF,KAC3BG,SAAQ,KACPrC,EAAKC,WAAWqC,OAAO,G,IAI7B,MAAMjB,EAAmB,IAChBkB,EAAAC,GAASC,OAAOC,KACrB,iBACG,+BACH,CACEC,QAAS,MAKTX,EAAgB,IACbO,EAAAC,GAASC,OAAOG,QACrB,WACA,6DACA,CACED,QAAS","sources":["src/index.js","src/js/home/search.js"],"sourcesContent":["import './js/signIn/sing-in';\nimport './js/home/home-movies';\nimport './js/loader';\nimport './js/modalMoviesCard';\nimport './js/modal-group';\nimport './js/pagination';\nimport './js/trailer';\nimport './js/home/search';\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport Notiflix from 'notiflix';\nimport { onKeyWord } from '../../api-services/movies-api-service';\nimport { createMoviesMarkupKey, galleryConteiner } from './home-movies';\nimport { createPagiKey } from '../pagination';\n\nexport { searchQuery };\n\nconst refs = {\n  searchForm: document.querySelector('.header__form'),\n  tuiPagination: document.querySelector('.tui-pagination'),\n  moviesSection: document.querySelector('.movies'),\n};\n\nlet searchQuery = '';\nlet page = 1;\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nasync function onSearch(evt) {\n  evt.preventDefault();\n  searchQuery = evt.currentTarget.elements.searchQuery.value;\n  page = 1;\n  galleryConteiner.innerHTML = '';\n  refs.tuiPagination.classList.add('is-hidden');\n\n  if (!searchQuery) {\n    notifyInfoSearch();\n    return;\n  }\n\n  await onKeyWord(searchQuery, page)\n    .then(({ data }) => {\n      const totalRes = data.total_results;\n\n      if (!totalRes) {\n        notifyFailure();\n        return;\n      }\n      if (totalRes <= 20) {\n        refs.moviesSection.classList.add('movies--padding');\n        createMoviesMarkupKey(searchQuery, page);\n        return;\n      }\n\n      refs.moviesSection.classList.remove('movies--padding');\n      createMoviesMarkupKey(searchQuery, page);\n      createPagiKey(searchQuery, totalRes);\n      refs.tuiPagination.classList.remove('is-hidden');\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      refs.searchForm.reset();\n    });\n}\n\nconst notifyInfoSearch = () => {\n  return Notiflix.Report.info(\n    'Empty query ðŸ§',\n    'Please, fill out this field!',\n    {\n      timeout: 4000,\n    }\n  );\n};\n\nconst notifyFailure = () => {\n  return Notiflix.Report.failure(\n    'Ooops ðŸ˜•',\n    'Search result not successful. Enter the correct movie name',\n    {\n      timeout: 4000,\n    }\n  );\n};\n"],"names":["parcelRequire","$cab4e48ded03b803$var$refs","searchForm","document","querySelector","tuiPagination","moviesSection","$cab4e48ded03b803$export$737148d43a127671","$cab4e48ded03b803$var$page","addEventListener","async","evt","preventDefault","currentTarget","elements","searchQuery","value","$39QIh","galleryConteiner","innerHTML","classList","add","$cab4e48ded03b803$var$notifyInfoSearch","$1o7ne","onKeyWord","then","data","totalRes","total_results","createMoviesMarkupKey","remove","$2nhTy","createPagiKey","$cab4e48ded03b803$var$notifyFailure","catch","error","console","log","finally","reset","$parcel$interopDefault","$eWCmQ","Report","info","timeout","failure"],"version":3,"file":"index.9957591b.js.map"}