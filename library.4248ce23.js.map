{"mappings":"iiBAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,uCAGME,EAAgBC,SAASC,cAC7B,4CAEIC,EAAcF,SAASC,cAC3B,0CAsBF,SAASE,IACPD,EAAYE,UAAUC,OAAO,6BAC7BN,EAAcK,UAAUE,IAAI,6BAE5BN,SAASC,cAAc,iBAAiBM,UAAY,GACpD,IAAMC,EAAqBC,KAAKC,MAAMC,aAAaC,QAAQ,iBAE3D,GAA2B,OAAvBJ,EAIoBA,EAAmBK,KAAI,SAAAC,GAC3C,OAAO,EAAAhB,EAAAiB,WAAUD,GAAIE,MAAK,SAAAC,GACxBC,EAAOD,E,YALXE,EAAAC,GAASC,OAAOC,QAAQ,GAAI,kC,CA6BhC,SAASJ,EAAOD,GACd,IAAQM,EAAiDN,EAAjDM,YAAaC,EAAoCP,EAApCO,MAAOV,EAA6BG,EAA7BH,GAAIW,EAAyBR,EAAzBQ,aAC3BC,EADoDT,EAAXU,OACpBd,KAAI,SAAAe,G,OAAOA,EAAJC,I,IAAiBC,KAAK,MACjDC,EAAS,gCAG6BC,OAHGlB,EAAG,oGAIrCkB,OAD+BT,EAAY,oBAMnBS,OALxBR,EAAM,6HAMkBQ,OADAR,EAAM,gDACWQ,OAAjBN,EAAY,OAAoCM,QAA/B,EAAAC,EAAAC,kBAAiBT,GAAc,mBAGrFzB,SACGC,cAAc,iBACdkC,mBAAmB,YAAaJ,E,CAYrC,SAASK,IACP,GAAIrC,EAAcK,UAAUiC,SAAS,6BAArC,CACErC,SAASC,cAAc,iBAAiBM,UAAY,GACzBE,KAAKC,MAAMC,aAAaC,QAAQ,iBAClBC,KAAI,SAAAC,GAC3C,OAAO,EAAAhB,EAAAiB,WAAUD,GAAIE,MAAK,SAAAC,GACxBC,EAAOD,E,WALb,CAWAjB,SAASC,cAAc,iBAAiBM,UAAY,GAC3BE,KAAKC,MAAMC,aAAaC,QAAQ,eAClBC,KAAI,SAAAC,GACzC,OAAO,EAAAhB,EAAAiB,WAAUD,GAAIE,MAAK,SAAAC,GACxBC,EAAOD,E,QApGblB,EAAcuC,iBAAiB,QAASnC,GACxCD,EAAYoC,iBAAiB,SAmC7B,WACEvC,EAAcK,UAAUC,OAAO,6BAC/BH,EAAYE,UAAUE,IAAI,6BAC1BN,SAASC,cAAc,iBAAiBM,UAAY,GACpD,IAAMgC,EAAmB9B,KAAKC,MAAMC,aAAaC,QAAQ,eAEzD,GAAyB,OAArB2B,EAEF,YADApB,EAAAC,GAASC,OAAOC,QAAQ,GAAI,mCAGNiB,EAAiB1B,KAAI,SAAAC,GACzC,OAAO,EAAAhB,EAAAiB,WAAUD,GAAIE,MAAK,SAAAC,GACxBC,EAAOD,E,UA3Cb,eADAjB,SAASC,cAAc,4BAA4BuC,aAGnDrC,IAoEFsC,EAAAC,KAAKC,cAAcL,iBAAiB,QAASF,GAC7CpC,SAASsC,iBAAiB,WAAW,SAAAM,G,OACrC,SAA0BA,GACxB,GAAkB,WAAdA,EAAMC,IACR,M,CAH0CC,CAAiBF,E","sources":["src/library.js","src/js/library/library-header.js"],"sourcesContent":["import './js/signIn/sing-in';\nimport './js/library/library-header';\nimport './js/loader';\nimport './js/modalMoviesCard';\nimport './js/modal-group';\nimport './js/trailer';\n","import { fetchById } from '../../api-services/movies-api-service';\nimport { dotaReleaseCheck } from '../home/home-movies';\nimport { refs } from '../modalMoviesCard';\nconst addWatchedBtn = document.querySelector(\n  '.library__btns-btn[data-add=\"watchedMB\"]'\n);\nconst addQueueBtn = document.querySelector(\n  '.library__btns-btn[data-add=\"queueMB\"]'\n);\n\nimport Notiflix from 'notiflix';\n\naddWatchedBtn.addEventListener('click', onAddWatchedBtn);\naddQueueBtn.addEventListener('click', onAddQueueBtn);\n\nif (\n  document.querySelector('.header__nav-link.active').textContent ===\n  'My library'\n) {\n  onAddWatchedBtn();\n  // document\n  //   .querySelector(`[data-remove=\"wathced\"]`)\n  //   .addEventListener('click', onRemoveFromWatched);\n\n  // document\n  //   .querySelector(`[data-remove=\"queue\"]`)\n  //   .addEventListener('click', onRemoveFromQueue);\n}\n\nfunction onAddWatchedBtn() {\n  addQueueBtn.classList.remove('library__btns-btn--active');\n  addWatchedBtn.classList.add('library__btns-btn--active');\n\n  document.querySelector('.library-list').innerHTML = '';\n  const parsedWathcedFilms = JSON.parse(localStorage.getItem('WatchedFilms'));\n\n  if (parsedWathcedFilms === null) {\n    Notiflix.Report.failure('', 'You have to create a list first');\n    return;\n  } else {\n    const arrLocalFilms = parsedWathcedFilms.map(id => {\n      return fetchById(id).then(r => {\n        markup(r);\n      });\n    });\n  }\n}\n\nfunction onAddQueueBtn() {\n  addWatchedBtn.classList.remove('library__btns-btn--active');\n  addQueueBtn.classList.add('library__btns-btn--active');\n  document.querySelector('.library-list').innerHTML = '';\n  const parsedQueueFilms = JSON.parse(localStorage.getItem('QueueFilms'));\n\n  if (parsedQueueFilms === null) {\n    Notiflix.Report.failure('', 'You have to create a list first');\n    return;\n  } else {\n    const arrLocalFilms = parsedQueueFilms.map(id => {\n      return fetchById(id).then(r => {\n        markup(r);\n      });\n    });\n  }\n}\n\nfunction markup(r) {\n  const { poster_path, title, id, release_date, genres } = r;\n const movieGenres = genres.map(({ name }) => name).join(', ');\n  const markup = `<li class=\"movies__card\" id=\"${id}\">\n      <img\n        class=\"movies__card-photo\"\n        src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\n        alt=\"${title}\"\n        loading=\"lazy\"\n        width=\"395px\"\n        height=\"354px\"\n      />\n      <h2 class=\"movies__card-title\">${title}</h2>\n      <p class=\"movies__card-genres\">${movieGenres} | ${dotaReleaseCheck(release_date)}</p>\n    </li>`;\n\n  document\n    .querySelector('.library-list')\n    .insertAdjacentHTML('beforeend', markup);\n}\n\nrefs.closeModalBtn.addEventListener('click', updateMarkup);\ndocument.addEventListener('keydown', event => closeModalEscape(event));\nfunction closeModalEscape(event) {\n  if (event.key !== 'Escape') {\n    return;\n  }\n  updateMarkup;\n}\n\nfunction updateMarkup() {\n  if (addWatchedBtn.classList.contains('library__btns-btn--active')) {\n    document.querySelector('.library-list').innerHTML = '';\n    const parsedWathcedFilms = JSON.parse(localStorage.getItem('WatchedFilms'));\n    const arrLocalFilms = parsedWathcedFilms.map(id => {\n      return fetchById(id).then(r => {\n        markup(r);\n      });\n    });\n    return;\n  }\n\n  document.querySelector('.library-list').innerHTML = '';\n  const parsedQueueFilms = JSON.parse(localStorage.getItem('QueueFilms'));\n  const arrLocalFilms = parsedQueueFilms.map(id => {\n    return fetchById(id).then(r => {\n      markup(r);\n    });\n  });\n}\n"],"names":["parcelRequire","$bt2La","$fedc438a4337639e$var$addWatchedBtn","document","querySelector","$fedc438a4337639e$var$addQueueBtn","$fedc438a4337639e$var$onAddWatchedBtn","classList","remove","add","innerHTML","parsedWathcedFilms","JSON","parse","localStorage","getItem","map","id","fetchById","then","r","$fedc438a4337639e$var$markup","$parcel$interopDefault","$iU1Pc","Report","failure","poster_path","title","release_date","movieGenres","genres","param","name","join","markup1","concat","$7xmR0","dotaReleaseCheck","insertAdjacentHTML","$fedc438a4337639e$var$updateMarkup","contains","addEventListener","parsedQueueFilms","textContent","$20kJP","refs","closeModalBtn","event","key","$fedc438a4337639e$var$closeModalEscape"],"version":3,"file":"library.4248ce23.js.map"}